<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://raw.githubusercontent.com/CathieNova/Haven-Tools-and-Helpers/refs/heads/main/res/favicon.ico">
    <title>SPT-Haven Documentation</title>
    <link rel="stylesheet" type="text/css" href="css/havendocumentation.css">
</head>
<body>
    <div id="sidebar">
        <h2 id="home-title">âœ¨ Haven âœ¨</h2>
        <h2 id="home-title">ğŸ“– Documentation ğŸ“–</h2>
        <div class="search-container">
            <input type="text" id="search" placeholder="Search content..." oninput="filterContent()">
        </div>
        <ul id="category-list">
            <li onclick="showContent('home')">Home</li>
            <li onclick="showContent('havenzonecreator')">Haven Zone Creator</li>
            <li onclick="showContent('havenindustries-chloe')">Haven Industries - Chloe</li>
            <li onclick="showContent('servermods')">Server Mods Guide</li>
            <li>
                <details>
                    <summary>Server Modding</summary>
                    <ul>
                        <li onclick="showContent('servermods-setup')">Setup Server Mod Project</li>
                        <li onclick="showContent('servermods-understanding')">Understanding the Code</li>
                    </ul>
                </details>
            </li>
            <li>
                <details>
                    <summary>Website Navigation</summary>
                    <ul>
                        <li id="header-button" onclick="openURL('home')">Home</li>
                        <li id="header-button" onclick="openURL('vcqlhelper')">Haven VCQL Helper</li>
                        <li id="header-button" onclick="openURL('itemdatabase')">Haven Item Database</li>
                        <li id="header-button" onclick="openURL('traderassort')">Haven Trader Assort Generator</li>
                        <li id="header-button" onclick="openURL('modslots')">Haven Mod Slot Generator</li>
                        <li id="header-button" onclick="openURL('hideoutcraft')">Haven Hideout Crafting Generator</li>
                        <li id="header-button" onclick="openURL('havendocumentation')">Haven Documentation</li>
                        <li id="header-button" onclick="openURL('havenmods')">Haven Industries Mods</li>
                    </ul>
                </details>
            </li>
        </ul>
        <footer>
            <div id="support-me">
                <a href="https://ko-fi.com/cathienova" target="_blank">
                    <img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee">
                </a>
            </div>
            <p>&copy; 2024 CathieNova</p>
            <p>Powered by Haven Industries</p>
        </footer>
    </div>

    <div id="content">
<!-- Haven Home -->
<div id="home" class="content-section">
    <h2 onclick="showContent('home')">Welcome to Haven Documentation!</h2>
    <p>
        The Haven Documentation is your go-to resource for guides and tutorials on Haven content and SPT modding. Whether you're just starting out or looking to dive deeper, you'll find everything you need here.
    </p>
    <p>
        Use the <b>search bar</b> to quickly find specific content, or explore the categories in the sidebar to navigate through different topics.
    </p>
    <p>
        The website is still a work in progress, and I'm continuously adding new content as time allows. So, please be patient as more updates and guides are added.
    </p>
    <p>
        <b>Want to contribute?</b> Feel free to fork the repository and create a pull request on the <a href="https://github.com/CathieNova/Haven-Tools-and-Helpers" target="_blank">GitHub repository</a> with any improvements or additions you'd like to see.
    </p>
    <p>
        <em>Thank you for visiting the Haven Documentation!</em>
    </p>
</div>


<!-- Haven Zone Creator Content -->
<div id="havenzonecreator" class="content-section">
    <h2 onclick="showContent('havenzonecreator')">Haven Zone Creator</h2>
    <p>
        The <b>Haven Zone Creator</b> is a powerful tool for <em>SPT mod developers</em> to create custom zones for VCQL, Loose Loot, and other mods with ease.
    </p>

    <h2>Overview</h2>
    <h1>
        <strong>Haven <span style="color:#008000;">Zone</span> <span style="color:#FF8C00;">Creator</span></b>
    </h1>
    <p>This mod allows you to configure and create Zones with various settings for position, rotation, scale, transparency, and more. It includes tools for VCQL zone creation and LooseLoot generation for mods.</p>
    <h3><span style="color:#008000;">Features:</span></h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Real-Time Zone Cube Adjustments:</b> Customize Zone Cube properties (position, rotation, scale, transparency).</li>
        <li><a class="icon">â–ªï¸ </a><b>Quick VCQL Zone Creation:</b> Generates zones and saves them to the VCQL folder.</li>
        <li><a class="icon">â–ªï¸ </a><b>LooseLoot Tools:</b> Configure probability, gravity, and randomization for loose loot generation (requires custom server mod).</li>
        <li><a class="icon">â–ªï¸ </a><b>Custom Keyboard Shortcuts:</b> Speed up Zone Cube transformations and mode switching.</li>
    </ul>

    <h2>Detailed Configurations</h2>
    <h3>Zone Information</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Current Zone Cube Position:</b> Displays the current Zone Cube's position (read-only).</li>
        <li><a class="icon">â–ªï¸ </a><b>Current Zone Cube Rotation:</b> Displays the current Zone Cube's rotation (read-only).</li>
        <li><a class="icon">â–ªï¸ </a><b>Current Zone Cube Scale:</b> Displays the current Zone Cube's scale (read-only).</li>
        <li><a class="icon">â–ªï¸ </a><b>Current Map Name:</b> Shows the ID of the current map (read-only).</li>
        <li><a class="icon">â–ªï¸ </a><b>Zone Cube Transparency:</b> Adjust transparency of the Zone Cube (range: 0.0 to 1.0).</li>
    </ul>

    <h3>Zone Box Settings</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Transform Speed:</b> Set the speed of Zone Cube transformations (range: 0.01 to 10).</li>
        <li><a class="icon">â–ªï¸ </a><b>Generate Haven Zone Cube:</b> Creates a Zone Cube at the look position.</li>
        <li><a class="icon">â–ªï¸ </a><b>Remove Haven Zone Cube:</b> Removes the currently selected Zone Cube.</li>
        <li><a class="icon">â–ªï¸ </a><b>Transform Keys:</b> Keyboard shortcuts for transforming the Zone Cube along X, Y, and Z axes (positive and negative).</li>
        <li><a class="icon">â–ªï¸ </a><b>Mode Keys:</b> Switch between Position, Scale, and Rotation modes.</li>
        <li><a class="icon">â–ªï¸ </a><b>Lock X and Z Rotation Axes:</b> Enables or disables locking X and Z axes during rotation.</li>
        <li><a class="icon">â–ªï¸ </a><b>Default Scale:</b> Sets the default scale for new Zone Cubes.</li>
    </ul>

    <h3>VCQL Zone Settings</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Zone Id:</b> Identifier for the zone (spaces replaced with underscores).</li>
        <li><a class="icon">â–ªï¸ </a><b>Zone Name:</b> Name of the zone (spaces replaced with underscores).</li>
        <li><a class="icon">â–ªï¸ </a><b>Zone Type:</b> Set the zone type (e.g., placeitem).</li>
        <li><a class="icon">â–ªï¸ </a><b>Flare Type:</b> Define flare effects for the zone.</li>
        <li><a class="icon">â–ªï¸ </a><b>Generate VCQL Zone:</b> Save the zone settings to the VCQL Zone folder.</li>
    </ul>

    <h3>LooseLoot Settings</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Probability:</b> Adjust spawn probability for LooseLoot (range: 0.0 to 1.0).</li>
        <li><a class="icon">â–ªï¸ </a><b>Use Gravity:</b> Enable or disable gravity for LooseLoot.</li>
        <li><a class="icon">â–ªï¸ </a><b>Random Rotation:</b> Enable or disable random rotation for LooseLoot.</li>
        <li><a class="icon">â–ªï¸ </a><b>Item Id (tpl):</b> Specify the template ID for LooseLoot items.</li>
        <li><a class="icon">â–ªï¸ </a><b>Generate Loose Loot:</b> Save LooseLoot data to the "_EXPORTED_LOOT_" folder.</li>
    </ul>

    <h2>Showcase</h2>
    <img src="https://i.imgur.com/fYkKNOL.gif" alt="fYkKNOL.gif">

    <h2>Known Issues</h2>
    <ul>
        <li>Custom keyboard shortcuts may conflict with other mods.</li>
    </ul>
    <p>If you encounter an issue, report it on <a href="https://github.com/CathieNova/SPT-HavenZoneCreator/issues">GitHub</a>.</p>

    <h2>Disclaimer</h2>
    <ul>
        <li>This mod is under active development; features may change or be added.</li>
        <li>The mod is provided "as-is".</li>
    </ul>
    <p>Enjoy and use responsibly!</p>
</div>



<!-- Haven Industries - Chloe Content -->
<div id="havenindustries-chloe" class="content-section">
    <h2 onclick="showContent('havenindustries-chloe')">Haven Industries - Chloe</h2>

    <p>
        Welcome to <b>Haven Industries - Chloe</b>! This mod introduces exciting new items and features to enhance your gameplay experience.
    </p>

    <h2>Description</h2>
    <p>
        Explore the exciting new items you can discover in-raid with this mod. From unique figurines to collectible TCG Anime Cards, there's something for everyone.
    </p>
    <p><em>Note:</em> Secure Containers and Storage Containers are not included in the in-raid items list. These items can be crafted or obtained through quests and other means within the game.</p>

    <h2>ğŸŒŸ Features</h2>
    <h3>Profiles</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Haven Standard Edition:</b> An improved version of the original Standard Edition. It has more useful items according to my personal view.</li>
        <li><a class="icon">â–ªï¸ </a><b>Haven Developer Edition:</b> Same stash size as Unheard Edition, and enough items and money to get your dev-on.</li>
    </ul>

    <h3>Hall of Fame</h3>
    <p>Showcase your special items in the Hall of Fame.</p>

    <h3>Crafting</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Ammo Crate:</b> Store your ammo.</li>
        <li><a class="icon">â–ªï¸ </a><b>Haven IPAC:</b> Craftable in the Medstation.</li>
        <li><a class="icon">â–ªï¸ </a><b>Haven Secure Container:</b> Craftable in the Lavatory.</li>
        <li><a class="icon">â–ªï¸ </a><b>Item Crate:</b> Craftable in the Workbench.</li>
        <li><a class="icon">â–ªï¸ </a><b>Weapon Crate:</b> Craftable in the Workbench.</li>
    </ul>

    <h3>TCG Anime Cards</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Waifu Binder:</b> Holds all 76 Waifu Cards.</li>
    </ul>

    <h3>Secure Containers</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Haven Secure Container:</b> Obtainable through quests. 
        </li>
        <img src="https://raw.githubusercontent.com/CathieNova/SPT-Haven-Industries-Chloe/refs/heads/SPT-3.10/Showcase%20Images/HavenSecureContainer.png" alt="Haven Secure Container" width="200px" />
        <br>
        <li><a class="icon">â–ªï¸ </a><b>Haven Theta Secure Container:</b> Obtainable through quests. 
        </li>
        <img src="https://raw.githubusercontent.com/CathieNova/SPT-Haven-Industries-Chloe/refs/heads/SPT-3.10/Showcase%20Images/HavenThetaSecureContainer.png" alt="Haven Theta Secure Container" width="200px" />
    </ul>

    <h3>New Metal Fuel Tanks</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Red Fuel Tank:</b> *100/100*</li>
        <li><a class="icon">â–ªï¸ </a><b>Blue Fuel Tank:</b> *100/100*</li>
        <li><a class="icon">â–ªï¸ </a><b>Green Fuel Tank:</b> *100/100*</li>
    </ul>

    <h3>Figurines</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Eagle Figurine</b></li>
        <li><a class="icon">â–ªï¸ </a><b>Egyptian Cat Figurine</b></li>
        <li><a class="icon">â–ªï¸ </a><b>Golden Finger Figurine</b></li>
        <li><a class="icon">â–ªï¸ </a><b>Cultist Skull</b></li>
    </ul>

    <h3>Storage Containers</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Haven Ipac:</b> For medical storage.</li>
        <li><a class="icon">â–ªï¸ </a><b>Haven Toolbox:</b> For tools and electronics storage.</li>
        <li><a class="icon">â–ªï¸ </a><b>Item Crate:</b> Similar to item case.</li>
        <li><a class="icon">â–ªï¸ </a><b>Weapon Crate:</b> Similar to weapon case.</li>
        <li><a class="icon">â–ªï¸ </a><b>Ammo Crate:</b> Similar to ammo box.</li>
    </ul>

    <h3>Key Storage</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Keycard Holder</b></li>
        <li><a class="icon">â–ªï¸ </a><b>5 Keychains</b></li>
        <li><a class="icon">â–ªï¸ </a><b>Keybox:</b> Holds keychains, keycard holder, and money.
        </li>
        <img src="https://raw.githubusercontent.com/CathieNova/SPT-Haven-Industries-Chloe/refs/heads/SPT-3.10/Showcase%20Images/Keybox.png" alt="Keybox" width="200px" />
    </ul>

    <h3>Misc Items</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>C4 Explosive</b></li>
    </ul>

    <h2>ğŸ“œ Quests</h2>
    <h3>Start</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>The Deadweight Test</b></li>
        <li><a class="icon">â–ªï¸ </a><b>The Mole has our loot</b>
            <ul>
                <li><a class="icon">â–ªï¸ </a><b>The Mole's Loot</b>
                    <ul>
                        <li><a class="icon">â–ªï¸ </a><b>Cleaning out Dorms</b>
                            <ul>
                                <li><a class="icon">â–ªï¸ </a><b>Cleaning out the Gas Station</b>
                                    <ul>
                                        <li><a class="icon">â–ªï¸ </a><b>The Spacious Container</b></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>

    <h3>Level & Other Requirements</h3>
    <ul>
        <li><a class="icon">â–ªï¸ </a><b>Level 5+:</b> Ammo bouta loose it - Part 1</li>
        <li><a class="icon">â–ªï¸ </a><b>Level 15+:</b> The Haven Collector</li>
        <li><a class="icon">â–ªï¸ </a><b>Level 20+ & Ammo bouta loose it - Part 1 Completed:</b> Ammo bouta loose it - Part 2</li>
    </ul>

    <h3>ğŸ“· Showcase of all Items:</h3>
    <p><em>PS: not showing the other 75 cards...</em></p>
    <img src="https://raw.githubusercontent.com/CathieNova/SPT-Haven-Industries-Chloe/refs/heads/SPT-3.10/Showcase%20Images/ItemsShowcase.png" alt="All Items" width="500px" />

    <h3>â— Notes</h3>
    <ul>
        <li>The mod contains a variety of items that can be crafted or obtained in different ways.</li>
    </ul>

    <h3>ğŸ“œ License</h3>
    <p>This mod is distributed for free use. Feel free to modify it, but please give proper credit.</p>
</div>


<!-- Server Mods Guide Content -->
        <div id="servermods" class="content-section">
            <h2 onclick="showContent('servermods')">Server Mods Guide</h2>
            <p>This is the content for <b>Server Mods Guide</b>. Will be added soon.</p>
        </div>
<!-- Server Modding - Setup Project Content -->
        <div id="servermods-setup" class="content-section">
            <h2 onclick="showContent('servermods-setup')">Server Modding - Setup Project</h2>

            <p>
                In this guide, I will walk you through how I personally set up a new server mod project. This guide will cover the following steps:
            </p>
            <ul>
                <li><a class="icon">â–ªï¸ </a>Downloading the proper tools and dependencies</li>
                <li><a class="icon">â–ªï¸ </a>Creating a new project</li>
                <li><a class="icon">â–ªï¸ </a>Setting up the project structure</li>
                <li><a class="icon">â–ªï¸ </a>Adding the necessary dependencies</li>
            </ul>
            <p>
                Though this guide mentions version 3.10, it should work for other versions too. It was made with 3.10 in mind.
                <br><br>
                Other developers may use different methods, but this method works for me. It might not be perfect, but itâ€™s a good starting point in my opinion.
                <br><br>
                By the end of this guide, you will have a Server Mod with the following:
            </p>
            <ul>
                <li><a class="icon">â–ªï¸ </a><b>Custom Trader with items for sale</b></li>
                <li><a class="icon">â–ªï¸ </a><b>Custom Items</b></li>
                <li><a class="icon">â–ªï¸ </a><b>Custom Hideout Crafts</b></li>
                <li><a class="icon">â–ªï¸ </a><b>Custom Items in the Hall of Fame</b></li>
                <li><a class="icon">â–ªï¸ </a><b>Custom Loot in Containers on each map</b></li>
            </ul>

            <h2>Before You Begin:</h2>
            <p>
                New to <b>Typescript</b>? Find comprehensive documentation on the official website: 
                <a href="https://www.typescriptlang.org/docs/" target="_blank">Typescript Documentation</a>
            </p>

            <h2>Download Tools and Dependencies:</h2>
            <p>
                Before you can start creating your server mod, you will need to download the following tools and dependencies:
            </p>
            <ul>
                <li><a class="icon">â–ªï¸ </a><a href="https://code.visualstudio.com/" target="_blank"><b>Visual Studio Code</b> (download here)</a></li>
                <li><a class="icon">â–ªï¸ </a><a href="https://nodejs.org/" target="_blank"><b>Node.js</b> (download here)</a></li>
                <li><a class="icon">â–ªï¸ </a><b>SPT 3.10 Server</b></li>
                <li><a class="icon">â–ªï¸ </a><a href="https://dev.sp-tarkov.com/chomp/ModExamples/" target="_blank"><b>SPT 3.10 Template</b> (download here)</a></li>
            </ul>

            <h2>Create a New Folder to Work In:</h2>
            <p>
                It's always good to have a proper folder to work in for your project. I store mine in <b>"D:\SPT-AKI\MyMods\Server Mods\SPT-3.10\"</b> as it's easy to find and work with.
                <br>
                Extract the content of "13.1AddTraderWithAssortJSON" from the SPT 3.10 Template into the folder you created.
            </p>
        </div>


<!-- Server Modding - Adding More Functions Content -->
        <div id="servermods-understanding" class="content-section">
            <h2 onclick="showContent('servermods-morefunctions')">Server Modding - Understanding the Code</h2>
            <p>
                Usually, the Mod Example will have comments in the code to help you understand what each part does, but I will explain the basics here with said comments:
            </p>
            <ul>
                <li><a class="icon">â–ªï¸ </a><b>"src"</b> folder: Contains the main code for the mod.</li>
                <li><a class="icon">â–ªï¸ </a><b>"types"</b> folder: Contains the Typescript types for the mod to recognize the code when you work with it (not needed in uploaded mods).</li>
                <li><a class="icon">â–ªï¸ </a><b>"db"</b> folder: Contains the JSON files for the mod, like the trader assort, items, hideout crafts, etc.</li>
                <li><a class="icon">â–ªï¸ </a><b>"res"</b> folder: Contains the images for the mod, like the trader images, item images, etc.</li>
                <li><a class="icon">â–ªï¸ </a><b>"package.json"</b> file: Contains the dependencies for the mod. Key properties include:
                    <ul>
                        <li><a class="icon">â–ªï¸ </a><b>name</b> - The name of the mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>version</b> - The version of the mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>sptVersion</b> - The version of SPT the mod is made for.</li>
                        <li><a class="icon">â–ªï¸ </a><b>loadBefore</b> - The mods that should load before this mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>loadAfter</b> - The mods that should load after this mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>incompatibilities</b> - The mods that are incompatible with this mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>isBundleMod</b> - Whether the mod contains bundles (like custom items).</li>
                        <li><a class="icon">â–ªï¸ </a><b>author</b> - Your name.</li>
                        <li><a class="icon">â–ªï¸ </a><b>contributors</b> - If you have any contributors to the mod.</li>
                        <li><a class="icon">â–ªï¸ </a><b>license</b> - The license of the mod (usually "MIT").</li>
                    </ul>
                </li>
                <li><a class="icon">â–ªï¸ </a><b>README.md</b> file: Contains information about the mod, like the description, features, installation instructions, and usage. It's always nice to have a README file in case someone wants to contribute or use the mod.</li>
            </ul>

            <h2>Now Let's Get Started with <b>"mod.ts"</b> in the "src" Folder:</h2>

            <p>
                <h4>The imports at the top are the dependencies for the mod, and you can add more if you need them.</h4>
            </p>
<code-block title="postDBLoad Example" language="javascript">
import { DependencyContainer } from "tsyringe"; // <-- This is the dependency container

// SPT types
import { IPreSptLoadMod } from "@spt/models/external/IPreSptLoadMod"; // <-- This is the main interface for the mod
import { IPostDBLoadMod } from "@spt/models/external/IPostDBLoadMod";// <-- This is the interface for the mod after the database is loaded
import { ILogger } from "@spt/models/spt/utils/ILogger"; // <-- This is the logger interface
import { PreSptModLoader } from "@spt/loaders/PreSptModLoader"; // <-- This is the loader for the mod
import { DatabaseServer } from "@spt/servers/DatabaseServer"; // <-- This is the server for the database
import { ImageRouter } from "@spt/routers/ImageRouter"; // <-- This is the router for the images
import { ConfigServer } from "@spt/servers/ConfigServer"; // <-- This is the server for the config
import { ConfigTypes } from "@spt/models/enums/ConfigTypes"; // <-- This is the enum for the config types
import { ITraderConfig } from "@spt/models/spt/config/ITraderConfig"; // <-- This is the trader config interface
import { IRagfairConfig } from "@spt/models/spt/config/IRagfairConfig"; // <-- This is the ragfair config interface
import { JsonUtil } from "@spt/utils/JsonUtil"; // <-- This is the JSON utility
import { Traders } from "@spt/models/enums/Traders"; // <-- This is the traders enum

// New trader settings
import baseJson = require("../db/base.json"); // <-- This is the base JSON file for the trader
import assortJson = require("../db/assort.json"); // <-- This is the assort JSON file for the trader to have items for sale, barter, etc.

import { TraderHelper } from "./traderHelpers"; // <-- This is the trader helper class
</code-block>
            <h4>The constructor is where you set up the mod, like the name, version, debug settings, etc. This will be used later in the mod.</h4>
        
<code-block title="postDBLoad Example" language="javascript">
    constructor() {
        this.mod = "acidphantasm-131AddTraderWithAssortJSON"; // Set name of mod so we can log it to console later - match this to your folder name that's built for \user\mods\
    }
</code-block>
        <h4>The <b>"preSptLoad"</b> function is the first function that gets called when the mod is loaded. Itâ€™s where you set up the mod.</h4>

<code-block title="postDBLoad Example" language="javascript">
    public preSptLoad(container: DependencyContainer): void 
    {
        // Get a logger
        this.logger = container.resolve<ILogger>("WinstonLogger"); // <-- This is the logger
        this.logger.debug(`[${this.mod}] preSpt Loading... `); // <-- This is the debug message

        // Get SPT code/data we need later
        const preSptModLoader: PreSptModLoader = container.resolve<PreSptModLoader>("PreSptModLoader"); // <-- This is the preSPT mod loader
        const imageRouter: ImageRouter = container.resolve<ImageRouter>("ImageRouter"); // <-- This is the image router
        const configServer = container.resolve<ConfigServer>("ConfigServer"); // <-- This is the config server
        const traderConfig: ITraderConfig = configServer.getConfig<ITraderConfig>(ConfigTypes.TRADER); // <-- This is the trader config
        const ragfairConfig = configServer.getConfig<IRagfairConfig>(ConfigTypes.RAGFAIR); // <-- This is the ragfair config

        // Create helper class and use it to register our traders image/icon + set its stock refresh time
        this.traderHelper = new TraderHelper(); // <-- This is the trader helper class
        this.traderHelper.registerProfileImage(baseJson, this.mod, preSptModLoader, imageRouter, "cat.jpg"); // <-- This is the profile image
        this.traderHelper.setTraderUpdateTime(traderConfig, baseJson, 3600, 4000); // <-- This is the trader update time in seconds

        // Add trader to trader enum
        Traders[baseJson._id] = baseJson._id; // <-- Add trader to the traders enum

        // Add trader to flea market
        ragfairConfig.traders[baseJson._id] = true; // <-- Add trader to the flea market

        this.logger.debug(`[${this.mod}] preSpt Loaded`); // <-- Debug message
    }
</code-block>
        <h4>The <b>"postSptLoad"</b> function is the last function that gets called when the mod is loaded. Itâ€™s where you can perform any final tasks before the mod is fully loaded.</h4>
<code-block title="postDBLoad Example" language="javascript">
    public postDBLoad(container: DependencyContainer): void
    {
        this.logger.debug(`[${this.mod}] postDb Loading... `); // <-- Debug message

        // Resolve SPT classes we'll use
        const databaseServer: DatabaseServer = container.resolve<DatabaseServer>("DatabaseServer"); // <-- This is the database server
        const jsonUtil: JsonUtil = container.resolve<JsonUtil>("JsonUtil"); // <-- This is the JSON utility

        // Get a reference to the database tables
        const tables = databaseServer.getTables(); // <-- Get the database tables

        // Add new trader to the trader dictionary in DatabaseServer - this is where the assort json is loaded
        /*
        * The assortJSON includes the following:
        * Milk available for roubles at LL1
        * Milk available for item barter at LL1
        * Helmet w/ soft armour available for roubles at LL1
        * Helmet w/ soft armour available for item barter at LL1
        * 
        * It is *highly recommended* to use MongoIDs for the IDs in the assort, this example does not in order to make it easier to understand.
        */
        this.traderHelper.addTraderToDb(baseJson, tables, jsonUtil, assortJson); // <-- Add trader to the database
        this.traderHelper.addTraderToLocales(baseJson, tables, baseJson.name, "Cat", baseJson.nickname, baseJson.location, "This is the cat shop"); // <-- Add trader to locales
        
        this.logger.debug(`[${this.mod}] postDb Loaded`); // <-- Debug message
    }
</code-block>
        </div>
    </div>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap" rel="stylesheet">


    <script>
        class CodeBlock extends HTMLElement {
            connectedCallback() {
                const title = this.getAttribute('title') || 'Code Example';
                const language = this.getAttribute('language') || 'plaintext';
                const code = this.innerHTML.trim();

                this.innerHTML = `
                    <div class="code-container">
                        <div class="code-header">
                            <span class="code-title">${title}</span>
                            <button class="copy-button" onclick="copyCode(this)">Copy Code</button>
                        </div>
                        <pre class="code-block">
<code class="language-${language}">
    ${code}
</code>
                        </pre>
                    </div>
                `;
            }
        }

        customElements.define('code-block', CodeBlock);

        function openURL(url) {
            if (url === 'home')
                window.open('https://spthaven.net/');
            if (url === 'vcqlhelper')
                window.open('https://spthaven.net/vcqlhelper');
            else if (url === 'itemdatabase')
                window.open('https://spthaven.net/itemdatabase');
            else if (url === 'traderassort')
                window.open('https://spthaven.net/traderassort');
            else if (url === 'modslots')
                window.open('https://spthaven.net/modslots');
            else if (url === 'hideoutcraft')
                window.open('https://spthaven.net/hideoutcrafts');
            else if (url === 'havendocumentation')
                window.open('https://spthaven.net/havendocumentation');
            else if (url === 'havenmods')
                window.open('https://spthaven.net/havenmods');
        }

        function showContent(sectionId) {
            const searchInput = document.getElementById('search');
            searchInput.value = '';

            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active', 'fade-in', 'with-border');
                section.style.display = 'none';
                clearHighlights(section);
            });

            const selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.style.display = 'block';
                setTimeout(() => selectedSection.classList.add('fade-in', 'active'), 50);

                selectedSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                window.location.hash = sectionId;
            }
        }

        function filterContent() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const sections = document.querySelectorAll('.content-section');

            if (!searchTerm.trim()) {
                sections.forEach(section => {
                    section.style.display = 'none';
                    section.classList.remove('with-border');
                    clearHighlights(section);
                });

                const currentHash = window.location.hash.substring(1) || 'home';
                const currentSection = document.getElementById(currentHash);
                if (currentSection) {
                    currentSection.style.display = 'block';
                }
                return;
            }

            sections.forEach(section => {
                const text = section.innerText.toLowerCase();
                clearHighlights(section);

                if (text.includes(searchTerm)) {
                    section.style.display = 'block';
                    section.classList.add('with-border');
                    section.classList.add('fade-in');
                    highlightText(section, searchTerm);
                } else {
                    section.style.display = 'none';
                    section.classList.remove('with-border');
                }
            });
        }

        function highlightText(section, term) {
            section.normalize();
            const regex = new RegExp(`(${term})`, 'gi');
            const textNodes = getTextNodes(section);

            textNodes.forEach(node => {
                const parent = node.parentNode;
                if (parent) {
                    const originalText = node.nodeValue;
                    console.log(`Node Value Before Highlight: "${originalText}"`);

                    const highlightedHTML = originalText.replace(regex, '<mark>$1</mark>');
                    console.log(`Highlighted HTML: "${highlightedHTML}"`);

                    const tempContainer = document.createElement('span');
                    tempContainer.innerHTML = highlightedHTML;

                    while (tempContainer.firstChild) {
                        parent.insertBefore(tempContainer.firstChild, node);
                    }
                    parent.removeChild(node);
                }
            });
        }

        function clearHighlights(section) {
            const marks = section.querySelectorAll('mark');
            marks.forEach(mark => {
                const parent = mark.parentNode;
                parent.replaceChild(document.createTextNode(mark.textContent), mark);
            });
        }

        function getTextNodes(element) {
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                {
                    acceptNode: (node) => {
                        const parentTag = node.parentNode.tagName;
                        if (
                            parentTag !== 'CODE' &&
                            parentTag !== 'PRE' &&
                            node.nodeValue.trim() !== ''
                        ) {
                            return NodeFilter.FILTER_ACCEPT;
                        }
                        return NodeFilter.FILTER_REJECT;
                    },
                },
                false
            );

            const nodes = [];
            while (walker.nextNode()) {
                nodes.push(walker.currentNode);
            }
            return nodes;
        }

        function copyCode(button) {
            const codeBlock = button.closest('.code-container').querySelector('code');
            const textToCopy = codeBlock.innerText;
            navigator.clipboard.writeText(textToCopy).then(() => {
                button.innerText = 'Copied!';
                setTimeout(() => (button.innerText = 'Copy Code'), 2000);
            }).catch(err => {
                console.error('Failed to copy code: ', err);
            });
        }

        window.onload = () => {
            const hash = window.location.hash.substring(1);
            if (hash) {
                showContent(hash);
            } else {
                showContent('home');
            }
        };
    </script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23WNPRN88E"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-23WNPRN88E');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5081062336249063"
    crossorigin="anonymous"></script>
</body>
</html>
